<!DOCTYPE html>
<!--
    Hesap PaylaÅŸ - Bill Splitting App
    Version: 2.0.0
    Last Updated: 2026-01-09
-->
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="theme-color" content="#FF6B6B">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Hesap PaylaÅŸ">
    <meta name="description" content="HÄ±zlÄ± ve adil hesap bÃ¶lÃ¼ÅŸtÃ¼rme uygulamasÄ±">
    <meta name="keywords" content="hesap, bÃ¶lÃ¼ÅŸme, restoran, seyahat, paylaÅŸma">
    
    <title>Hesap PaylaÅŸ</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23FF6B6B' width='192' height='192'/><text x='96' y='110' font-size='80' font-weight='bold' text-anchor='middle' fill='white' font-family='Arial'>HP</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect fill='%23FF6B6B' width='180' height='180' rx='40'/><text x='90' y='105' font-size='70' font-weight='bold' text-anchor='middle' fill='white' font-family='Arial'>HP</text></svg>">
    
    <link rel="stylesheet" href="styles.css?v=32">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <style>
        * {
            -webkit-user-select: none;
            user-select: none;
        }
        input, textarea, select {
            -webkit-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Onboarding/KayÄ±t SayfasÄ± -->
        <div id="onboardingPage" class="page active" style="background: white; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; overflow-y: auto;">
            <div class="onboarding-content">
                <div class="onboarding-header" style="background: linear-gradient(135deg, #e8f0ff 0%, #f5e8ff 100%); padding: 12px 15px; border-radius: 0; margin-bottom: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.06); display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                    <h1 style="font-size: 1.5em; margin: 0 0 -10px 0; letter-spacing: 0.5px; line-height: 1; display: flex; align-items: center; justify-content: center; gap: 6px;">
                        <span style="color: #4A90E2; font-weight: 900;">Hesap</span>
                        <span style="color: #27ae60; font-weight: 400; font-size: 1.2em;">%</span>
                        <span style="color: #9B59B6; font-weight: 900;">PaylaÅŸ</span>
                    </h1>
                    <p style="font-size: 1.1em; color: #666; font-style: italic; margin: 8px 0 0 0; font-family: 'Pacifico', 'Brush Script MT', 'Great Vibes', cursive; font-weight: 400; letter-spacing: 0.5px;">tÃ¼kettiÄŸin kadar Ã¶de !</p>
                </div>

                <div class="signup-section">
                    <!-- Signup Form -->
                    <div id="signupForm" class="auth-form login-card" style="display: none;">
                        <div class="login-header">ÃœYEOL</div>
                        <form id="manualSignupForm" class="login-form" onsubmit="handleManualSignup(event)">
                            <input type="text" id="signupFirstName" placeholder="Ad" required class="login-input">
                            <input type="text" id="signupLastName" placeholder="Soyad" required class="login-input">
                            <input type="tel" id="phone" placeholder="Telefon (0532 333 22 22)" value="0532 333 22 22" required class="login-input" oninput="handlePhoneInput(this)">
                            <input type="email" id="email" placeholder="E-posta" required class="login-input">
                            <input type="password" id="password" placeholder="Åifre" required class="login-input">
                            <button type="submit" class="login-btn">KAYDOL</button>
                        </form>
                        <p class="signup-text" style="padding: 0 20px 20px 20px;">Kaydolarak <a href="#">ÅartlarÄ±</a> kabul etmiÅŸ olursunuz</p>
                    </div>
                    
                    <!-- Login Form -->
                    <div id="loginForm" class="auth-form login-card">
                        <div class="login-header">ÃœYE GÄ°RÄ°ÅÄ°</div>
                        <form id="manualLoginForm" class="login-form" onsubmit="handleManualLogin(event)">
                            <input type="email" id="loginEmail" placeholder="E-posta" required class="login-input" style="pointer-events: auto;">
                            <input type="password" id="loginPassword" placeholder="Åifre" required class="login-input" style="pointer-events: auto;">
                            <p class="forgot-link"><a href="#" onclick="showPasswordResetForm(); return false;">Åifreni mi unuttun?</a></p>
                            <button type="submit" class="login-btn" style="pointer-events: auto;">ÃœYE GÄ°RÄ°ÅÄ°</button>
                        </form>
                        <p class="signup-text">HesabÄ±n yok mu? <a href="#" onclick="showAuthForm('signup'); return false;">ÃœYE OL</a></p>
                    </div>

                    <!-- Åifre SÄ±fÄ±rlama Formu -->
                    <div id="resetPasswordForm" class="auth-form login-card" style="display: none;">
                        <div class="login-header">ÅÄ°FRE SIFIRLA</div>
                        <form id="resetForm" class="login-form" onsubmit="handlePasswordReset(event)">
                            <p style="font-size: 0.9em; color: #666; margin-bottom: 15px;">E-posta adresinizi girin, size sÄ±fÄ±rlama kodu gÃ¶ndereceÄŸiz.</p>
                            <input type="email" id="resetEmail" placeholder="E-posta" required class="login-input" style="pointer-events: auto;">
                            <input type="hidden" id="resetToken">
                            <div id="resetCodeSection" style="display: none;">
                                <input type="text" id="resetCode" placeholder="SÄ±fÄ±rlama Kodu" class="login-input" style="pointer-events: auto;">
                                <input type="password" id="newPassword" placeholder="Yeni Åifre" class="login-input" style="pointer-events: auto;">
                            </div>
                            <button type="submit" class="login-btn" id="resetSubmitBtn" style="pointer-events: auto;">KOD GÃ–NDER</button>
                        </form>
                        <p class="signup-text"><a href="#" onclick="showAuthForm('login'); return false;">GiriÅŸ SayfasÄ±na DÃ¶n</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ana Sayfa -->
        <div id="homePage" class="page">
            <div class="header" style="position: relative; background: linear-gradient(135deg, #e8f0ff 0%, #f5e8ff 100%); padding: 12px 15px; border-radius: 0; margin-bottom: 12px;">
                <!-- Profil Ä°konu -->
                <button id="homeProfileBtn" class="profile-btn" onclick="goToProfile()" title="Profil" style="position: absolute !important; top: 15px !important; right: 15px !important; left: auto !important; display: none; background: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s; z-index: 10; flex-shrink: 0;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#333" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </button>
                
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div style="flex: 1; text-align: center;">
                        <h1 style="font-size: 1.5em; margin: 0 0 -10px 0; letter-spacing: 0.5px; line-height: 1; display: flex; align-items: center; justify-content: center; gap: 6px;">
                            <span class="hesap">Hesap</span>
                            <span style="color: #27ae60; font-weight: 400; font-size: 1.2em;">%</span>
                            <span class="paylas">PaylaÅŸ</span>
                        </h1>
                        <p style="font-size: 1.1em; color: #666; font-style: italic; margin: 8px 0 0 0; font-family: 'Pacifico', 'Brush Script MT', 'Great Vibes', cursive; font-weight: 400; letter-spacing: 0.5px;">tÃ¼kettiÄŸin kadar Ã¶de !</p>
                    </div>
                </div>
                
                <!-- HoÅŸgeldin MesajÄ± -->
                <div id="homeWelcomeMessage" style="display: none; margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px; text-align: center;">
                    <p style="margin: 0; color: #333; font-weight: 600;">HoÅŸgeldin, <span id="homeUserName"></span>! ğŸ‘‹</p>
                </div>
            </div>
            </div>
            
            <!-- Login Olan KullanÄ±cÄ±lar iÃ§in MenÃ¼ -->
            <div id="homeUserMenu" style="display: none; padding: 20px;">
                <div style="display: grid; grid-template-columns: 1fr; gap: 15px; max-width: 400px; margin: 0 auto;">
                    <div class="option-card" onclick="checkUserAndNavigate()">
                        <div class="option-icon">ğŸ‘¥</div>
                        <h2>Grup Kur / KatÄ±l</h2>
                    </div>
                    
                    <div class="option-card" onclick="checkUserForReservation()">
                        <div class="option-icon">â˜ï¸</div>
                        <h2>Kolay Rezervasyon</h2>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rezervasyon SayfasÄ± -->
        <div id="reservationPage" class="page">
            <button onclick="backToHome()" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.8em; cursor: pointer; color: #999; z-index: 10;" title="Kapat">Ã—</button>
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            
            <div class="form-container" style="padding: 15px;">
                <h2 style="text-align: center; margin-bottom: 20px;">SeÃ§iminizi yapÄ±n !</h2>
                
                <!-- TÃ¼r SeÃ§imi ButonlarÄ± -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
                    <button onclick="setReservationType('restaurant')" style="padding: 15px; background: linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: 600; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                        <span style="font-size: 2em;">ğŸ½ï¸</span>
                        <span>Cafe / Restaurant</span>
                    </button>
                    <button onclick="setReservationType('hotel')" style="padding: 15px; background: linear-gradient(135deg, #4ECDC4 0%, #44B3AB 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: 600; display: flex; flex-direction: column; align-items: center; gap: 8px;">
                        <span style="font-size: 2em;">ğŸ¨</span>
                        <span>Hotel</span>
                    </button>
                </div>
                
                <!-- Hedef Konum SeÃ§imi -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">ğŸ“ Hedef Konum (2 km Ã§apÄ±nda)</label>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <input type="text" id="targetLocation" placeholder="Manuel gir (Ã–rn: KÄ±zÄ±lay, Ankara)" style="flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1em; box-sizing: border-box; cursor: text;">
                        <button onclick="openMapSelection()" style="padding: 12px 20px; background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.2em; white-space: nowrap; display: flex; align-items: center; gap: 5px;" title="Haritadan seÃ§">
                            ğŸ—ºï¸
                        </button>
                    </div>
                    <small style="display: block; margin-top: 5px; color: #999;">Manuel yazabilir veya harita butonuna tÄ±klayarak seÃ§ebilirsiniz</small>
                </div>
                
                <!-- Manuel Ä°sim GiriÅŸi -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Mekan AdÄ± (Manuel GiriÅŸ)</label>
                    <input type="text" id="manualVenueName" placeholder="Ã–rn: Tarihi KebapÃ§Ä±, Luxor Otel..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1em; box-sizing: border-box;">
                </div>
                
                <!-- Devam Butonu -->
                <button onclick="handleReservationSearch()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #11a853 0%, #0d7e3a 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.05em; font-weight: 600;">Devam Et</button>
            </div>
            
            <div class="back-button" onclick="backToHome()" style="margin: 20px auto; width: fit-content;">â† Geri</div>
        </div>
        
        <!-- Arama SonuÃ§larÄ± SayfasÄ± -->
        <div id="searchResultsPage" class="page">
            <button onclick="showPage('reservationPage')" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.8em; cursor: pointer; color: #999; z-index: 10;" title="Kapat">Ã—</button>
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            
            <div class="form-container" style="padding: 15px;">
                <h2 style="text-align: center; margin-bottom: 20px;" id="searchResultsTitle">Arama SonuÃ§larÄ±</h2>
                
                <div id="resultsList" style="display: flex; flex-direction: column; gap: 12px;">
                    <!-- Dinamik sonuÃ§lar buraya gelecek -->
                </div>
            </div>
            
            <div class="back-button" onclick="showPage('reservationPage')" style="margin: 20px auto; width: fit-content;">â† Geri</div>
        </div>
            
        <!-- Harita Modal -->
            <div id="mapModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box;">
                <div style="background: white; width: 100%; max-width: 500px; max-height: 90vh; border-radius: 12px; overflow: hidden; position: relative; display: flex; flex-direction: column;">
                    <div style="background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%); padding: 15px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
                        <h3 style="margin: 0; color: white; font-size: 1.1em;">ğŸ—ºï¸ Konum SeÃ§</h3>
                        <button onclick="closeMapModal()" style="background: none; border: none; color: white; font-size: 1.5em; cursor: pointer;">Ã—</button>
                    </div>
                    
                    <div id="mapContainer" style="width: 100%; padding: 20px; background: linear-gradient(135deg, #f0f7ff 0%, #e8f1ff 100%); flex-shrink: 0; text-align: center; color: #666;">
                        <p style="font-size: 2.5em; margin: 10px 0;">ğŸ—ºï¸</p>
                        <p style="margin: 10px 0; font-weight: 600;">Mekan adresini aÅŸaÄŸÄ±ya yazÄ±nÄ±z</p>
                        <p style="margin: 5px 0; font-size: 0.9em; color: #999;">Ã–rn: KadÄ±kÃ¶y Belediyesi, Ä°stanbul</p>
                    </div>
                    
                    <div style="padding: 15px; overflow-y: auto; flex: 1;">
                        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333;">Konum (Adres)</label>
                        <input type="text" id="locationInput" placeholder="Mekan adresini giriniz..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 0.95em; box-sizing: border-box; margin-bottom: 12px;">
                    </div>
                    
                    <div style="padding: 15px; border-top: 1px solid #ddd; display: flex; gap: 10px; flex-shrink: 0;">
                        <button onclick="closeMapModal()" style="flex: 1; padding: 12px; background: #ccc; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Ä°ptal</button>
                        <button onclick="confirmMapLocation()" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #11a853 0%, #0d7e3a 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Onayla</button>
                    </div>
                </div>
            </div>            </div>        </div>
        
        <!-- Mekan Detay SayfasÄ± -->
        <div id="venueDetailPage" class="page">
            <button onclick="showPage('reservationPage')" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.8em; cursor: pointer; color: #999; z-index: 10;" title="Kapat">Ã—</button>
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            
            <div class="form-container" style="padding: 20px;">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 id="venueDetailName" style="margin: 0 0 10px 0; color: #333; font-size: 1.8em;"></h2>
                    <p id="venueDetailAddress" style="margin: 0; color: #999; font-size: 1em;"></p>
                </div>
                
                <!-- 3 EÅŸit Buton -->
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- Telefon Butonu -->
                    <a id="venuePhoneButton" href="" style="text-decoration: none;">
                        <button style="width: 100%; padding: 18px; background: linear-gradient(135deg, #11a853 0%, #0d7e3a 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                            <span style="font-size: 1.3em;">ğŸ“</span>
                            <span id="venuePhoneText">Telefon</span>
                        </button>
                    </a>
                    
                    <!-- E-Rezervasyon Butonu -->
                    <button onclick="handleEreservation()" style="width: 100%; padding: 18px; background: linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                        <span style="font-size: 1.3em;">ğŸ“§</span>
                        <span>E-Rezervasyon</span>
                    </button>
                    
                    <!-- Adrese Git Butonu -->
                    <button onclick="navigateToVenue()" style="width: 100%; padding: 18px; background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                        <span style="font-size: 1.3em;">ğŸ—ºï¸</span>
                        <span>Adrese Git!</span>
                    </button>
                </div>
                
                <!-- Ek Bilgiler (Opsiyonel) -->
                <div style="margin-top: 30px; padding: 20px; background: #f9f9f9; border-radius: 10px;">
                    <h3 style="margin: 0 0 15px 0; color: #333; font-size: 1.2em;">â„¹ï¸ Bilgiler</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.2em;">ğŸ“</span>
                            <span id="venueDetailDistance" style="color: #666;">Mesafe bilgisi</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.2em;">ğŸª</span>
                            <span id="venueDetailType" style="color: #666;">Mekan tÃ¼rÃ¼</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="back-button" onclick="showPage('reservationPage')" style="margin: 20px auto; width: fit-content;">â† Geri</div>
        </div>

        <!-- Bilgi GiriÅŸi SayfasÄ± -->
        <!-- Grup SeÃ§imi SayfasÄ± -->
        <div id="groupChoicePage" class="page">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            
            <div class="options-grid" style="margin-top: 20px;">
                <div class="option-card" onclick="goToCreateGroup()" style="background: linear-gradient(135deg, #11a853 0%, #0d7e3a 100%);">
                    <div class="option-icon">â•</div>
                    <h2>Grup Kur</h2>
                </div>
                
                <div class="option-card" onclick="goToJoinGroup()" style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);">
                    <div class="option-icon">ğŸ”—</div>
                    <h2>Grup KatÄ±l</h2>
                </div>
            </div>
            
            <div class="back-button" onclick="backToHome()" style="margin: 20px auto 0; width: fit-content;">â† Geri</div>
        </div>

        <!-- Grup Kodu GiriÅŸ SayfasÄ± -->
        <div id="joinCodePage" class="page" style="background: linear-gradient(135deg, #f5f0f9 0%, #faf8fc 100%);">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            <button onclick="backToGroupChoice()" style="position: absolute; top: 75px; right: 15px; background: none; border: none; font-size: 28px; cursor: pointer; color: #7c3aed; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">âœ•</button>
            
            <div class="form-container" style="text-align: center; padding: 15px;">
                
                <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                    <button onclick="showPage('qrScannerPage'); setTimeout(() => startQRScanner(), 100);" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #11a853 0%, #0d7e3a 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 0.95em;">ğŸ¥ KamerayÄ± AÃ§</button>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; text-align: left; margin-bottom: 8px; font-weight: 600; color: #333;">Grup Kodunu YazÄ±nÄ±z</label>
                    <input type="text" id="joinGroupCode" placeholder="xxx-xxx" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1em; font-family: monospace; letter-spacing: 2px; box-sizing: border-box;">
                </div>
                
                <button onclick="submitJoinCode()" style="width: 100%; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1em; margin-bottom: 15px;">Devam Et</button>
                
                <div id="joinCodeResult"></div>
            </div>
        </div>

        <!-- QR Kod Okuyucu SayfasÄ± -->
        <div id="qrScannerPage" class="page">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            <div class="back-button" onclick="backToJoinCodePage()">â† Geri</div>
            
            <div class="form-container" style="text-align: center; padding: 15px;">
                <h2 style="margin-bottom: 20px;">QR Kod Okut</h2>
                
                <div style="position: relative; width: 100%; max-width: 300px; margin: 0 auto; background: #000; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
                    <video id="qrVideo" style="width: 100%; height: 300px; display: block;"></video>
                    <canvas id="qrCanvas" style="display: none;"></canvas>
                </div>
                
                <div id="qrResult" style="margin-top: 20px; min-height: 40px;">
                    <p style="color: #999; font-size: 0.9em;">KamerayÄ± grup kodunun Ã¼zerine getir...</p>
                </div>
                
                <button onclick="stopQRScanner()" style="margin-top: 20px; padding: 12px 20px; background: #e0e0e0; border: none; border-radius: 8px; cursor: pointer; font-size: 1em;">KamerayÄ± Kapat</button>
            </div>
        </div>

        <!-- Grup Kodu SayfasÄ± -->
        <div id="groupCodePage" class="page" style="background: linear-gradient(135deg, #f5f0f9 0%, #faf8fc 100%); min-height: 100vh;">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            
            <div class="form-container" style="text-align: center; padding: 8px 15px;">
                <h3 style="font-size: 1.3em; margin: 5px 0 15px 0; font-weight: 600; color: #333;">Grup AdÄ±nÄ±z : <span id="groupWelcomeTitle"></span></h3>
                
                <!-- QR Kodu Container - SabitlenmiÅŸ GeniÅŸlik, Kompakt -->
                <div style="margin: 0 auto 15px auto; width: fit-content;">
                    <div id="qrCodeContainer" style="display: inline-block; padding: 8px; background: white; border-radius: 8px; border: 2px solid #f0f0f0;"></div>
                </div>
                
                <!-- 2 SÃ¼tunlu Grid: Kod Card ve PaylaÅŸ Butonu (QR kodun geniÅŸliÄŸine uygun) -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 0 auto 15px; width: fit-content;">
                    <!-- Kod Output Card -->
                    <div style="background: linear-gradient(135deg, #d4e8f7 0%, #e8f4fb 100%); padding: 12px 10px; border-radius: 8px; border: 2px solid #3498db; box-shadow: 0 2px 8px rgba(52, 152, 219, 0.2); min-width: 100px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                        <p id="groupCodeDisplay" style="font-size: 1.4em; color: #333; font-weight: bold; letter-spacing: 2px; font-family: monospace; margin: 0; text-align: center;"></p>
                    </div>
                    
                    <!-- PaylaÅŸ Butonu -->
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <button onclick="smartShareGroup()" style="padding: 12px 10px; font-size: 0.95em; background: linear-gradient(135deg, #11a853 0%, #0d7e3a 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; box-shadow: 0 4px 12px rgba(17, 168, 83, 0.3); transition: all 0.3s; height: 100%; display: flex; align-items: center; justify-content: center;">ğŸ’¬ WhatsApp</button>
                    </div>
                </div>
                
                <p style="color: #666; margin: 0 0 15px 0; font-size: 0.75em; line-height: 1.3; text-align: center;">QR kodu ve Grup Kodunu kamera ile okutarak veya PaylaÅŸ butonu ile gÃ¶ndererek arkadaÅŸlarÄ±nÄ±zÄ± gruba dahil edebilirsiniz.</p>
                
                <div class="back-button" onclick="backToHome()" style="margin: 0 auto; width: fit-content;">â† Geri</div>
            </div>
        </div>

        <!-- PaylaÅŸma SeÃ§enekleri Modal -->
        <div id="shareModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: white; border-radius: 12px; padding: 25px; width: 90%; max-width: 400px; box-shadow: 0 4px 20px rgba(0,0,0,0.2);">
                <p style="text-align: center; font-size: 1.1em; color: #666; font-style: italic; margin: 8px 0 15px 0; font-family: 'Pacifico', 'Brush Script MT', 'Great Vibes', cursive; font-weight: 400;">tÃ¼kettiÄŸin kadar Ã¶de !</p>
                <h3 style="margin-top: 0; margin-bottom: 20px; text-align: center;">Gruba Davet Et</h3>
                
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <button class="share-option" onclick="shareViaWhatsApp()" style="padding: 15px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; font-size: 1em; text-align: left;">
                        ğŸ’¬ WhatsApp'ta PaylaÅŸ
                    </button>
                    <button class="share-option" onclick="shareViaSMS()" style="padding: 15px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; font-size: 1em; text-align: left;">
                        ğŸ“± SMS ile GÃ¶nder
                    </button>
                    <button class="share-option" onclick="copyGroupCode()" style="padding: 15px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; font-size: 1em; text-align: left;">
                        ğŸ“‹ Kodu Kopyala
                    </button>
                </div>
                
                <button onclick="closeShareModal()" style="width: 100%; padding: 12px; margin-top: 15px; background: #e0e0e0; border: none; border-radius: 6px; cursor: pointer; font-size: 0.95em;">Kapat</button>
            </div>
        </div>

        <div id="infoPage" class="page">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            <div class="back-button" onclick="backToHome()">â† Geri</div>
            
            <div class="logo-card" style="margin: 20px 15px;">
                <h1 style="font-size: 2em; margin: 0 0 8px 0; letter-spacing: 0.5px;">
                    <span style="color: #4A90E2; font-weight: 900;">Hesap</span>
                    <span style="color: #999; font-weight: 400; font-size: 1.2em; margin: 0 8px;">/</span>
                    <span style="color: #9B59B6; font-weight: 900;">PaylaÅŸ</span>
                </h1>
                <p style="font-size: 0.95em; color: #666; font-style: italic; margin: 12px 0 0 0; font-family: 'Great Vibes', cursive;">hem Ã§ok kolay, hem Ã§ok adil !</p>
            </div>
            
            <div class="form-container">
                <h2 id="infoTitle">Bilgilerinizi Girin</h2>
                
                <div class="form-group">
                    <label for="infoFirstName">AdÄ±:</label>
                    <input type="text" id="infoFirstName" placeholder="Ã–rn: Ahmet" autocomplete="off">
                </div>
                
                <div class="form-group">
                    <label for="infoLastName">SoyadÄ±:</label>
                    <input type="text" id="infoLastName" placeholder="Ã–rn: YÄ±lmaz" autocomplete="off">
                </div>
                
                <div class="form-group" id="groupIdGroup" style="display: none;">
                    <label for="groupId">Grup ID (Ä°steÄŸe baÄŸlÄ±):</label>
                    <input type="text" id="groupId" placeholder="QR koddan group ID" autocomplete="off">
                </div>
                
                <button class="btn btn-primary" onclick="submitInfo()">Devam Et</button>
            </div>
        </div>

        <!-- Restaurant SeÃ§imi -->
        <div id="restaurantPage" class="page">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            <div class="back-button" onclick="backToInfo()">â† Geri</div>
            
            <div class="logo-card" style="margin: 20px 15px;">
                <h1 style="font-size: 2em; margin: 0 0 8px 0; letter-spacing: 0.5px;">
                    <span style="color: #4A90E2; font-weight: 900;">Hesap</span>
                    <span style="color: #999; font-weight: 400; font-size: 1.2em; margin: 0 8px;">/</span>
                    <span style="color: #9B59B6; font-weight: 900;">PaylaÅŸ</span>
                </h1>
                <p style="font-size: 0.95em; color: #666; font-style: italic; margin: 12px 0 0 0; font-family: 'Great Vibes', cursive;">hem Ã§ok kolay, hem Ã§ok adil !</p>
            </div>
            
            <div class="section">
                <h2>ğŸ½ï¸ Restaurant SeÃ§</h2>
                <div id="restaurantList" class="restaurant-grid"></div>
            </div>
        </div>

        <!-- Profil SayfasÄ± - Modal -->
        <div id="profilePage" class="profile-modal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; display: none; align-items: center; justify-content: center;">
            <div style="position: relative; background: white; border-radius: 20px; max-width: 400px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3); padding: 25px;">
            <button onclick="closeProfileModal()" style="position: absolute; top: 15px; right: 15px; background: #f0f0f0; border: none; border-radius: 50%; width: 35px; height: 35px; font-size: 24px; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; line-height: 1;">Ã—</button>
            
            <h2 style="margin: 0 0 20px 0; color: #333; font-size: 1.5em; text-align: center;">ğŸ‘¤ Profil</h2>
            
            <div style="background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid #e0e0e0;">
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                        <span style="color: #666; font-size: 0.9em;">Ad Soyad</span>
                        <span id="profileName" style="color: #333; font-weight: 600; font-size: 0.9em;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                        <span style="color: #666; font-size: 0.9em;">ğŸ“§ E-posta</span>
                        <span id="profileEmail" style="color: #333; font-weight: 600; font-size: 0.9em;">-</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                        <span style="color: #666; font-size: 0.9em;">ğŸ“± Telefon</span>
                        <span id="profilePhone" style="color: #333; font-weight: 600; font-size: 0.9em;">-</span>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                <button onclick="editProfile()" style="padding: 12px; background: #667eea; color: white; border: none; border-radius: 10px; font-size: 0.85em; font-weight: 600; cursor: pointer;">
                    âœï¸ DÃ¼zenle
                </button>
                <button onclick="changePassword()" style="padding: 12px; background: #f5576c; color: white; border: none; border-radius: 10px; font-size: 0.85em; font-weight: 600; cursor: pointer;">
                    ğŸ” Åifre
                </button>
            </div>

            <button onclick="logout()" style="width: 100%; padding: 12px; background: white; color: #e74c3c; border: 2px solid #e74c3c; border-radius: 10px; font-size: 0.95em; font-weight: 600; cursor: pointer;">
                ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
            </button>
            </div>
        </div>

        <!-- MenÃ¼ SayfasÄ± -->
        <div id="menuPage" class="page">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            <div class="back-button" onclick="backToRestaurant()">â† Geri</div>
            
            <div class="logo-card" style="margin: 20px 15px;">
                <h1 style="font-size: 2em; margin: 0 0 8px 0; letter-spacing: 0.5px;">
                    <span style="color: #4A90E2; font-weight: 900;">Hesap</span>
                    <span style="color: #999; font-weight: 400; font-size: 1.2em; margin: 0 8px;">/</span>
                    <span style="color: #9B59B6; font-weight: 900;">PaylaÅŸ</span>
                </h1>
                <p style="font-size: 0.95em; color: #666; font-style: italic; margin: 12px 0 0 0; font-family: 'Great Vibes', cursive;">hem Ã§ok kolay, hem Ã§ok adil !</p>
            </div>
            
            <div class="menu-header">
                <h2 id="restaurantName">Restaurant AdÄ±</h2>
                <p id="restaurantInfo">Telefon: <span id="restaurantPhone"></span></p>
            </div>
            
            <div class="tabs">
                <div id="categoryTabs" class="category-tabs"></div>
            </div>
            
            <div id="menuItems" class="menu-items"></div>
            
            <div class="menu-footer">
                <button class="btn btn-secondary" onclick="goToCart()">ğŸ›’ SipariÅŸ Listesine Git (Adet: <span id="cartCount">0</span>)</button>
            </div>
        </div>

        <!-- SipariÅŸ Listesi ve Hesap BÃ¶lme -->
        <div id="cartPage" class="page">
            <div class="standard-header">
                <h1>
                    <span class="hesap-word">Hesap</span>
                    <span class="percent-sign">%</span>
                    <span class="paylas-word">PaylaÅŸ</span>
                </h1>
                <p>tÃ¼kettiÄŸin kadar Ã¶de !</p>
            </div>
            <div class="back-button" onclick="backToMenu()">â† Geri</div>
            
            <div class="logo-card" style="margin: 20px 15px;">
                <h1 style="font-size: 2em; margin: 0 0 8px 0; letter-spacing: 0.5px;">
                    <span style="color: #4A90E2; font-weight: 900;">Hesap</span>
                    <span style="color: #999; font-weight: 400; font-size: 1.2em; margin: 0 8px;">/</span>
                    <span style="color: #9B59B6; font-weight: 900;">PaylaÅŸ</span>
                </h1>
                <p style="font-size: 0.95em; color: #666; font-style: italic; margin: 12px 0 0 0; font-family: 'Great Vibes', cursive;">hem Ã§ok kolay, hem Ã§ok adil !</p>
            </div>
            
            <h2>ğŸ›’ SipariÅŸler ve Hesap BÃ¶lme</h2>
            
            <div id="ordersSection" class="orders-section">
                <div id="ordersList"></div>
            </div>
            
            <div class="summary-section">
                <div class="summary-card">
                    <h3>ğŸ’° Toplam Tutarlar</h3>
                    <div id="summaryItems"></div>
                    <hr>
                    <div class="total-row">
                        <strong>Genel Toplam:</strong>
                        <strong id="grandTotal">0.00 â‚º</strong>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="resetAll()">Yeni Hesaplama</button>
            </div>
        </div>
    </div>

    <!-- ÃœrÃ¼n Detay Modal -->
    <div id="itemModal" class="modal">
        <div class="modal-content">
            <p style="text-align: center; font-size: 1.1em; color: #666; font-style: italic; margin: 8px 0 15px 0; font-family: 'Pacifico', 'Brush Script MT', 'Great Vibes', cursive; font-weight: 400;">tÃ¼kettiÄŸin kadar Ã¶de !</p>
            <span class="close" onclick="closeItemModal()">&times;</span>
            
            <div id="itemModalBody">
                <!-- Dinamik iÃ§erik -->
            </div>
        </div>
    </div>

    <script src="script.js?v=2.0.0"></script>
</body>
</html>
